<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tính Chu Vi và Diện Tích</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="/css/simple.css">
</head>

<body>
    <div class="container">
        <h1><i class="fas fa-ruler"></i> Tính Chu Vi & Diện Tích</h1>

        <form action="/shape/calculate" method="post" id="calculateForm">

            <div class="form-group">
                <label for="shape"><i class="fas fa-shapes"></i> Chọn Hình</label>
                <select name="shape" id="shape" onchange="updateInputs()" required>
                    <option value="">--Chọn hình--</option>
                    <option value="square">▢ Hình vuông</option>
                    <option value="rectangle">▭ Hình chữ nhật</option>
                    <option value="circle">● Hình tròn</option>
                    <option value="triangle">▲ Hình tam giác</option>
                </select>
                <div class="error-message"><i class="fas fa-exclamation-circle"></i> Vui lòng chọn hình</div>
            </div>

            <div class="form-group">
                <label for="calculation"><i class="fas fa-calculator"></i> Tính</label>
                <select name="calculation" id="calculation" required>
                    <option value="perimeter">Chu vi</option>
                    <option value="area">Diện tích</option>
                    <option value="both">Cả hai</option>
                </select>
            </div>

            <div id="inputContainer"></div>

            <button type="submit"><i class="fas fa-calculator"></i> Tính Toán</button>
        </form>

        <div class="result" id="resultDiv">
            <h3><i class="fas fa-check-circle"></i> Kết Quả</h3>
            <div id="resultContent"></div>
        </div>
    </div>

    <script>
        const shapes = {
            square: { label: 'Cạnh', inputs: ['side'] },
            rectangle: { label: 'Dài x Rộng', inputs: ['length', 'width'] },
            circle: { label: 'Bán kính', inputs: ['radius'] },
            triangle: { label: 'Ba cạnh', inputs: ['a', 'b', 'c'] }
        };

        function updateInputs() {
            const shape = document.getElementById('shape').value;
            const container = document.getElementById('inputContainer');
            container.innerHTML = '';

            if (!shape) return;

            const config = shapes[shape];
            const inputGroup = document.createElement('div');
            inputGroup.className = 'input-group';

            config.inputs.forEach(input => {
                const group = document.createElement('div');
                const label = document.createElement('label');
                const inputEl = document.createElement('input');

                label.textContent = config.label;
                inputEl.type = 'number';
                inputEl.id = input;
                inputEl.name = input;
                inputEl.step = '0.01';
                inputEl.required = true;
                inputEl.placeholder = `Nhập ${config.label.toLowerCase()}`;

                group.appendChild(label);
                group.appendChild(inputEl);
                inputGroup.appendChild(group);
            });

            container.appendChild(inputGroup);
        }

        document.getElementById('calculateForm').addEventListener('submit', function (e) {
            e.preventDefault();

            const shape = document.getElementById('shape').value;
            if (!shape) {
                document.querySelector('.error-message').style.display = 'block';
                return;
            }
            document.querySelector('.error-message').style.display = 'none';

            this.submit();
        });
    </script>
</body>

</html>